---
import { getCollection, render } from "astro:content";
import BaseHead from "../../components/BaseHead.astro";
import Header from "../../components/Header.astro";
import Footer from "../../components/Footer.astro";
import { SITE_TITLE } from "../../consts";

export async function getStaticPaths() {
  const services = await getCollection("services");
  return services.map((service) => ({
    params: { slug: service.id },
    props: service,
  }));
}

const service = Astro.props;
const { Content } = await render(service);

// Define service icons and colors with high-quality SVG paths
const serviceIcons: Record<string, string> = {
  "web-design": `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg>`,
  "app-development": `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect x="5" y="2" width="14" height="20" rx="2" ry="2"/><line x1="12" y1="18" x2="12.01" y2="18"/></svg>`,
  "ai-content": `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M12 8V4H8"/><rect x="4" y="8" width="16" height="12" rx="2"/><path d="M2 14h2"/><path d="M20 14h2"/><path d="M15 13v2"/><path d="M9 13v2"/></svg>`,
  "ui-ux-design": `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"/><line x1="3" y1="9" x2="21" y2="9"/><line x1="9" y1="21" x2="9" y2="9"/></svg>`,
  "brand-identity": `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2L2 7l10 5 10-5-10-5z"/><path d="M2 17l10 5 10-5"/><path d="M2 12l10 5 10-5"/></svg>`,
  "logo-design": `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M12 19l7-7 3 3-7 7-3-3z"/><path d="M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"/><path d="M2 2l7.5 1.5"/></svg>`,
  "social-media-design": `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="3" width="20" height="14" rx="2" ry="2"/><line x1="8" y1="21" x2="16" y2="21"/><line x1="12" y1="17" x2="12" y2="21"/></svg>`,
};

const serviceColors: Record<string, string> = {
  "web-design": "#3b82f6",
  "app-development": "#8b5cf6",
  "ai-content": "#22c55e",
  "ui-ux-design": "#f59e0b",
  "brand-identity": "#ef4444",
  "logo-design": "#ec4899",
  "social-media-design": "#06b6d4",
};

const icon =
  serviceIcons[service.id] ||
  `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"/></svg>`;
const color = serviceColors[service.id] || "#f59e0b";
---

<!doctype html>
<html lang="en">
  <head>
    <BaseHead
      title={`${service.data.title} | ${SITE_TITLE}`}
      description={service.data.description}
      keywords={`${service.data.title}, Graphic Design, Web Design, UI/UX, Branding, ${service.data.title_ar || ""}, تصميم جرافيك, تصميم مواقع`}
    />
    <script
      is:inline
      type="application/ld+json"
      set:html={JSON.stringify({
        "@context": "https://schema.org",
        "@type": "Service",
        name: service.data.title,
        description: service.data.description,
        provider: {
          "@type": "Person",
          name: SITE_TITLE,
          url: "https://omarcreatives.com",
        },
      })}
    />
    <style define:vars={{ serviceColor: color }}>
      body {
        padding-top: 80px;
        background-color: var(--bg-primary);
        color: var(--text-primary);
        font-family: "Inter", sans-serif;
      }

      /* Hero Section */
      .service-hero {
        padding: 6rem 2rem 4rem;
        text-align: center;
        position: relative;
        overflow: hidden;
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      .service-hero::before {
        content: "";
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 100%;
        height: 100%;
        background: radial-gradient(
          circle at center,
          rgba(var(--accent-rgb), 0.1) 0%,
          transparent 70%
        );
        pointer-events: none;
        z-index: -1;
      }

      .back-link {
        display: inline-flex;
        align-items: center;
        gap: 0.75rem;
        color: var(--text-secondary);
        text-decoration: none;
        margin-bottom: 3rem;
        font-size: 1rem;
        font-weight: 500;
        transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
        padding: 0.5rem 1.25rem;
        border-radius: 50px;
        background: rgba(255, 255, 255, 0.03);
        border: 1px solid rgba(255, 255, 255, 0.05);
        backdrop-filter: blur(10px);
      }

      .back-link:hover {
        color: var(--accent);
        border-color: rgba(var(--accent-rgb), 0.3);
        transform: translateX(-5px);
        background: rgba(var(--accent-rgb), 0.05);
      }

      .hero-content {
        max-width: 800px;
        z-index: 1;
      }

      .service-icon {
        width: 80px;
        height: 80px;
        margin-bottom: 2rem;
        display: inline-block;
        color: var(--accent);
        filter: drop-shadow(0 0 15px rgba(var(--accent-rgb), 0.4));
        animation: float 6s ease-in-out infinite;
      }

      .service-icon :global(svg) {
        width: 100%;
        height: 100%;
      }

      @keyframes float {
        0%,
        100% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(-10px);
        }
      }

      .service-hero h1 {
        font-size: 4rem;
        margin-bottom: 1.5rem;
        font-weight: 800;
        letter-spacing: -0.03em;
        line-height: 1.1;
        background: linear-gradient(135deg, #fff 30%, #a1a1aa 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
      }

      .service-hero p {
        color: var(--text-secondary);
        font-size: 1.4rem;
        line-height: 1.6;
        font-weight: 400;
      }

      /* Featured Image */
      .featured-image-container {
        max-width: 1000px;
        margin: 2rem auto 4rem;
        border-radius: 32px;
        overflow: hidden;
        box-shadow: 0 30px 60px rgba(0, 0, 0, 0.5);
        border: 1px solid rgba(255, 255, 255, 0.1);
        position: relative;
        background: rgba(255, 255, 255, 0.02);
      }

      .featured-image {
        width: 100%;
        height: auto;
        display: block;
      }

      .featured-image.robot-img {
        object-fit: contain;
        padding: 3rem;
        background: radial-gradient(
          circle at center,
          rgba(var(--accent-rgb), 0.1) 0%,
          transparent 75%
        );
      }

      main {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 2rem 8rem;
      }

      .content-grid {
        display: grid;
        grid-template-columns: 1fr 350px;
        gap: 4rem;
        align-items: start;
      }

      /* Main Content Area */
      .main-content {
        background: rgba(255, 255, 255, 0.02);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 255, 255, 0.05);
        border-radius: 32px;
        padding: 4rem;
      }

      .main-content h2 {
        font-size: 2.2rem;
        color: var(--text-primary);
        margin-bottom: 2rem;
        font-weight: 700;
        letter-spacing: -0.02em;
      }

      .main-content :global(p) {
        color: var(--text-secondary);
        line-height: 1.9;
        margin-bottom: 2rem;
        font-size: 1.15rem;
      }

      .main-content :global(ul) {
        list-style: none;
        padding: 0;
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        gap: 1.25rem;
        margin-bottom: 3rem;
      }

      .main-content :global(li) {
        color: var(--text-primary);
        background: rgba(255, 255, 255, 0.03);
        padding: 1rem 1.5rem;
        border-radius: 16px;
        border: 1px solid rgba(255, 255, 255, 0.05);
        display: flex;
        align-items: center;
        gap: 1rem;
        font-size: 1.05rem;
        transition: all 0.3s ease;
      }

      .main-content :global(li:hover) {
        background: rgba(245, 158, 11, 0.05);
        border-color: rgba(245, 158, 11, 0.2);
        transform: translateY(-2px);
      }

      .main-content :global(li::before) {
        content: "✦";
        color: var(--accent);
        font-weight: 800;
      }

      /* Sidebar Area */
      .sidebar {
        display: flex;
        flex-direction: column;
        gap: 2rem;
        position: sticky;
        top: 100px;
      }

      .sidebar-widget {
        background: rgba(255, 255, 255, 0.02);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 255, 255, 0.08);
        border-radius: 24px;
        padding: 2rem;
      }

      .widget-title {
        font-size: 1.2rem;
        font-weight: 700;
        margin-bottom: 1.5rem;
        color: var(--text-primary);
        display: flex;
        align-items: center;
        gap: 0.75rem;
      }

      .process-steps {
        display: flex;
        flex-direction: column;
        gap: 1.5rem;
      }

      .process-step {
        display: flex;
        gap: 1.25rem;
      }

      .step-number {
        width: 32px;
        height: 32px;
        background: var(--accent-gradient);
        color: #000;
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 800;
        font-size: 0.9rem;
        flex-shrink: 0;
      }

      .step-content h4 {
        margin: 0 0 0.25rem 0;
        font-size: 1rem;
        color: var(--text-primary);
        font-weight: 600;
      }

      .step-content p {
        margin: 0;
        font-size: 0.9rem;
        color: var(--text-secondary);
        line-height: 1.5;
      }

      .cta-widget {
        background: var(--accent-gradient);
        color: #000;
        border: none;
        text-align: center;
      }

      .cta-widget h3 {
        font-size: 1.5rem;
        font-weight: 800;
        margin-bottom: 1rem;
      }

      .cta-widget p {
        margin-bottom: 2rem;
        font-weight: 500;
        opacity: 0.9;
      }

      .cta-btn {
        display: block;
        width: 100%;
        padding: 1.25rem;
        background: #000;
        color: #fff;
        border-radius: 16px;
        font-weight: 700;
        text-decoration: none;
        transition: all 0.3s ease;
      }

      .cta-btn:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3);
      }

      @media (max-width: 1024px) {
        .content-grid {
          grid-template-columns: 1fr;
        }
        .sidebar {
          position: static;
        }
      }

      @media (max-width: 768px) {
        .service-hero h1 {
          font-size: 2.8rem;
        }
        .main-content {
          padding: 2rem;
        }
        main {
          padding: 0 1.5rem 6rem;
        }
      }

      /* RTL / Arabic Enhancements */
      :global(.is-ar) {
        font-family: "Cairo", "Tajawal", sans-serif;
      }

      .service-title-ar,
      .service-desc-ar {
        display: none;
      }
      :global(.is-ar) .service-title-en,
      :global(.is-ar) .service-desc-en,
      :global(.is-ar) .back-link span:first-child {
        display: none;
      }
      :global(.is-ar) .service-title-ar,
      :global(.is-ar) .service-desc-ar {
        display: block;
      }

      :global(.is-ar) .main-content :global(li) {
        flex-direction: row-reverse;
        text-align: right;
      }

      :global(.is-ar) .step-number {
        order: 2;
      }
      :global(.is-ar) .step-content {
        order: 1;
        text-align: right;
      }
    </style>
  </head>
  <body>
    <Header />

    <header class="service-hero">
      <a href="/services" class="back-link">
        <svg
          width="20"
          height="20"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2.5"
        >
          <path d="M19 12H5M12 19l-7-7 7-7"></path>
        </svg>
        <span>Back to Services</span>
        <span class="service-title-ar">العودة للخدمات</span>
      </a>

      <div class="hero-content">
        <span class="service-icon" set:html={icon} />
        <h1 class="service-title-en">{service.data.title}</h1>
        {
          service.data.title_ar && (
            <h1 class="service-title-ar">{service.data.title_ar}</h1>
          )
        }
        <p class="service-desc-en">{service.data.description}</p>
        {
          service.data.description_ar && (
            <p class="service-desc-ar">{service.data.description_ar}</p>
          )
        }
      </div>
    </header>

    <main>
      <div class="featured-image-container">
        {
          service.data.image && (
            <img
              src={service.data.image}
              alt={service.data.title}
              class={`featured-image ${["ai-content", "logo-design", "web-design", "social-media-design"].includes(service.id) ? "robot-img" : ""}`}
            />
          )
        }
      </div>

      <div class="content-grid">
        <div class="main-content">
          <h2 data-i18n="serviceDetail.about">About This Service</h2>
          <Content />
        </div>

        <aside class="sidebar">
          <div class="sidebar-widget">
            <h3 class="widget-title">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                style="color: var(--accent)"
                ><path d="m12 14 4-4"></path><path
                  d="M3.34 19a10 10 0 1 1 17.32 0"></path><path
                  d="m9.01 16.5.5.5a2.5 2.5 0 0 1 0 3.53l-.5.5"></path><path
                  d="m14.99 16.5-.5.5a2.5 2.5 0 0 0 0 3.53l.5.5"></path><path
                  d="M12 22a7 7 0 0 0-7-7c-2 0-3 1-3 3s1 3 3 3h14c2 0 3-1 3-3s-1-3-3-3a7 7 0 0 0-7 7Z"
                ></path></svg
              >
              How It Works
            </h3>
            <div class="process-steps">
              <div class="process-step">
                <div class="step-number">1</div>
                <div class="step-content">
                  <h4>Consultation</h4>
                  <p>We discuss your vision and project goals.</p>
                </div>
              </div>
              <div class="process-step">
                <div class="step-number">2</div>
                <div class="step-content">
                  <h4>Strategy</h4>
                  <p>I develop a tailored plan for your success.</p>
                </div>
              </div>
              <div class="process-step">
                <div class="step-number">3</div>
                <div class="step-content">
                  <h4>Execution</h4>
                  <p>Your project is crafted with precision.</p>
                </div>
              </div>
              <div class="process-step">
                <div class="step-number">4</div>
                <div class="step-content">
                  <h4>Delivery</h4>
                  <p>Final review and project launch.</p>
                </div>
              </div>
            </div>
          </div>

          <div class="sidebar-widget cta-widget">
            <h3>Start Your Project</h3>
            <p>Ready to bring your ideas to life? Let's talk today.</p>
            <a href="/contact" class="cta-btn">Get Started Now</a>
          </div>
        </aside>
      </div>
    </main>

    <Footer />
    <script is:inline>
      // Apply correct language fonts and direction
      const updateLang = () => {
        const lang = localStorage.getItem("language") || "en";
        document.documentElement.setAttribute(
          "dir",
          lang === "ar" ? "rtl" : "ltr",
        );
        if (lang === "ar") {
          document.body.classList.add("is-ar");
        } else {
          document.body.classList.remove("is-ar");
        }
      };
      updateLang();
      window.addEventListener("languageChanged", updateLang);
    </script>
  </body>
</html>
