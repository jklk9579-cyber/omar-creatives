---
import BaseHead from '../components/BaseHead.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import { SITE_TITLE, SITE_DESCRIPTION } from '../consts';
import { getCollection } from 'astro:content';

const projects = await getCollection('projects');
const sortedProjects = projects.sort((a, b) => new Date(b.data.date).valueOf() - new Date(a.data.date).valueOf());
---

<!doctype html>
<html lang="ar" dir="rtl">
	<head>
		<BaseHead title={`Ø§Ù„Ø£Ø¹Ù…Ø§Ù„ | ${SITE_TITLE}`} description="Ù…Ø¹Ø±Ø¶ Ø£Ø¹Ù…Ø§Ù„Ù†Ø§ ÙˆÙ…Ø´Ø§Ø±ÙŠØ¹Ù†Ø§" />
		<style>
			.page-hero {
				background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
				color: white;
				padding: 4rem 2rem;
				text-align: center;
				margin: -3em -1em 0;
			}
			.page-hero h1 {
				color: white;
				font-size: 2.5rem;
				margin-bottom: 0.5rem;
			}
			.page-hero p {
				opacity: 0.9;
				font-size: 1.1rem;
			}
			.projects-grid {
				display: grid;
				grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
				gap: 2rem;
				padding: 3rem 0;
			}
			.project-card {
				background: white;
				border-radius: 20px;
				overflow: hidden;
				box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
				transition: all 0.3s ease;
				position: relative;
			}
			.project-card:hover {
				transform: translateY(-8px);
				box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
			}
			.project-image {
				width: 100%;
				height: 220px;
				object-fit: cover;
				background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
				display: flex;
				align-items: center;
				justify-content: center;
				font-size: 4rem;
			}
			.project-content {
				padding: 1.5rem 2rem 2rem;
			}
			.project-card h2 {
				margin: 0.5rem 0;
				font-size: 1.3rem;
				color: #333;
			}
			.project-card p {
				color: #666;
				margin: 0 0 1rem 0;
				font-size: 0.95rem;
				line-height: 1.6;
			}
			.project-category {
				display: inline-block;
				background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
				color: white;
				padding: 0.35rem 1rem;
				border-radius: 20px;
				font-size: 0.8rem;
				font-weight: 500;
			}
			.project-meta {
				display: flex;
				gap: 1rem;
				margin-top: 1rem;
				padding-top: 1rem;
				border-top: 1px solid #eee;
				font-size: 0.85rem;
				color: #888;
			}
			.featured-badge {
				position: absolute;
				top: 1rem;
				left: 1rem;
				background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
				color: white;
				padding: 0.35rem 0.75rem;
				border-radius: 8px;
				font-size: 0.75rem;
				font-weight: bold;
				z-index: 10;
			}
			.project-link {
				display: inline-flex;
				align-items: center;
				gap: 0.5rem;
				color: #667eea;
				text-decoration: none;
				font-weight: bold;
				transition: gap 0.3s ease;
			}
			.project-link:hover {
				gap: 1rem;
			}
			main {
				width: 1200px;
				max-width: calc(100% - 2rem);
				margin: 0 auto;
				padding: 2rem 1rem;
			}
			@media (max-width: 768px) {
				.projects-grid {
					grid-template-columns: 1fr;
				}
			}
		</style>
	</head>
	<body>
		<Header />
		<main>
			<section class="page-hero">
				<h1>ğŸ¨ Ù…Ø¹Ø±Ø¶ Ø§Ù„Ø£Ø¹Ù…Ø§Ù„</h1>
				<p>Ù†Ù…Ø§Ø°Ø¬ Ù…Ù† Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø§Ù„ØªÙŠ Ø£Ù†Ø¬Ø²Ù†Ø§Ù‡Ø§ Ø¨Ù†Ø¬Ø§Ø­</p>
			</section>
			
			{sortedProjects.length > 0 ? (
				<div class="projects-grid">
					{sortedProjects.map((project) => (
						<article class="project-card">
							{project.data.featured && <span class="featured-badge">â­ Ù…Ù…ÙŠØ²</span>}
							<div class="project-image">ğŸ–¼ï¸</div>
							<div class="project-content">
								<span class="project-category">{project.data.category}</span>
								<h2>{project.data.title}</h2>
								<p>{project.data.description}</p>
								<a href={`/projects/${project.slug}`} class="project-link">
									Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„ <span>â†</span>
								</a>
								{project.data.client && (
									<div class="project-meta">
										<span>ğŸ‘¤ {project.data.client}</span>
									</div>
								)}
							</div>
						</article>
					))}
				</div>
			) : (
				<div class="projects-grid">
					<article class="project-card">
						<span class="featured-badge">â­ Ù…Ù…ÙŠØ²</span>
						<div class="project-image">ğŸŒ</div>
						<div class="project-content">
							<span class="project-category">ØªØµÙ…ÙŠÙ… Ù…ÙˆØ§Ù‚Ø¹</span>
							<h2>Ù…ÙˆÙ‚Ø¹ Ø´Ø±ÙƒØ© ØªÙ‚Ù†ÙŠØ©</h2>
							<p>ØªØµÙ…ÙŠÙ… ÙˆØªØ·ÙˆÙŠØ± Ù…ÙˆÙ‚Ø¹ Ù…ØªÙƒØ§Ù…Ù„ Ù„Ø´Ø±ÙƒØ© ØªÙ‚Ù†ÙŠØ© Ù†Ø§Ø´Ø¦Ø© Ù…Ø¹ Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ…</p>
							<a href="/contact" class="project-link">Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„ <span>â†</span></a>
							<div class="project-meta">
								<span>ğŸ‘¤ Ø´Ø±ÙƒØ© ØªÙƒ Ø³ÙˆÙ„ÙŠÙˆØ´Ù†Ø²</span>
							</div>
						</div>
					</article>
					<article class="project-card">
						<div class="project-image">ğŸ“±</div>
						<div class="project-content">
							<span class="project-category">ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ù…ÙˆØ¨Ø§ÙŠÙ„</span>
							<h2>ØªØ·Ø¨ÙŠÙ‚ Ù…ØªØ¬Ø± Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</h2>
							<p>ØªØ·Ø¨ÙŠÙ‚ Ù…ÙˆØ¨Ø§ÙŠÙ„ iOS Ùˆ Android Ù„Ù…ØªØ¬Ø± Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù…Ø¹ Ù†Ø¸Ø§Ù… Ø¯ÙØ¹ Ù…ØªÙƒØ§Ù…Ù„</p>
							<a href="/contact" class="project-link">Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„ <span>â†</span></a>
							<div class="project-meta">
								<span>ğŸ‘¤ Ù…ØªØ¬Ø± Ø§Ù„Ø£Ù†Ø§Ù‚Ø©</span>
							</div>
						</div>
					</article>
					<article class="project-card">
						<div class="project-image">ğŸ¨</div>
						<div class="project-content">
							<span class="project-category">Ù‡ÙˆÙŠØ© Ø¨ØµØ±ÙŠØ©</span>
							<h2>Ø¨Ø±Ø§Ù†Ø¯ Ù…Ø·Ø¹Ù… ÙØ§Ø®Ø±</h2>
							<p>ØªØµÙ…ÙŠÙ… Ù‡ÙˆÙŠØ© Ø¨ØµØ±ÙŠØ© ÙƒØ§Ù…Ù„Ø© ØªØ´Ù…Ù„ Ø§Ù„Ø´Ø¹Ø§Ø± ÙˆØ§Ù„Ø£Ù„ÙˆØ§Ù† ÙˆØ§Ù„Ø®Ø·ÙˆØ·</p>
							<a href="/contact" class="project-link">Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„ <span>â†</span></a>
							<div class="project-meta">
								<span>ğŸ‘¤ Ù…Ø·Ø¹Ù… Ø§Ù„Ø°ÙˆØ§Ù‚Ø©</span>
							</div>
						</div>
					</article>
				</div>
			)}
		</main>
		<Footer />
	</body>
</html>
